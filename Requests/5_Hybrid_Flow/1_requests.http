##########
#
# Implict Flow
#
# https://auth0.com/docs/api-auth/tutorials/hybrid-flow
#
##########


#####
# Configuration --> use Regular Web App in Auth0

@client_id= zQ75pIPUblzH2fLIPWSkewF20gB1KxQS
@client_secret = ePpxmxaWTe8aDZsjJlQY2LjRxGhcTP3iuip95LAOzMTTmZuGjc-oadgd3ayzMV-5
@redirect_uri = http://localhost:3000/signin-auth0

#
#####


# Get identity and access token
GET https://{{tenant}}/authorize?scope=openid%20email%20profile%20calc%3Asquare%20offline_access&audience={{audience}}&response_type=code%20id_token%20token&client_id={{client_id}}&redirect_uri={{redirect_uri}}&nonce=12345789&prompt=consent

@access_token = eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1FRkdRamN4UkVKRk9FRXdRMFUwTmpjME56bENNa016UmpFMFFUVTNNME16UlVSQk9ERXhNZyJ9.eyJpc3MiOiJodHRwczovL2FwaXN1bW1pdC5ldS5hdXRoMC5jb20vIiwic3ViIjoiYXV0aDB8NWJmMTMwZGM1YTAwYWYyMjE5ZGM5ZTUzIiwiYXVkIjpbImNhbGN1bGF0b3ItYXBpIiwiaHR0cHM6Ly9hcGlzdW1taXQuZXUuYXV0aDAuY29tL3VzZXJpbmZvIl0sImlhdCI6MTU0Mzc4OTE2OSwiZXhwIjoxNTQzNzk2MzY5LCJhenAiOiJ6UTc1cElQVWJsekgyZkxJUFdTa2V3RjIwZ0IxS3hRUyIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwgY2FsYzpzcXVhcmUgb2ZmbGluZV9hY2Nlc3MifQ.QkpBDJg1Q17LmuMcZ5hc9SQT3H2hY5cGsKw5-EFFf_iSURRBj5RNk135I21k2rLi6XgC_sBc3uSA6fajzmE7ZTPiwZAs6QTBHhBhmbCg6UEybLwwq_Zbrc06bVpdDEybP4ldrgqf7DmTYG4CMTf5Z0lNdmOThdOCGV7N6l04lWW0mDwRzInSvsW-NzultIR_AW2Eo8SQZoRVGsVU_xKH5n8wbq9w9I92VnKcwqnp9fEbDNGHpFIE_xGWyQto52H0CjLaS56RFExZiDcaTaiE94ejADqGlWBeR-8bhkBW1TtjnuTGmqLO3_Slkg-j4RmjKxy7xJBLppl2a32qnss2eg
@id_token = eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1FRkdRamN4UkVKRk9FRXdRMFUwTmpjME56bENNa016UmpFMFFUVTNNME16UlVSQk9ERXhNZyJ9.eyJuaWNrbmFtZSI6ImpvaG5kb2UiLCJuYW1lIjoiam9obmRvZUBhY21lLmluYyIsInBpY3R1cmUiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9mYzAzZjhkODZiODdmODA0NDNkMjIzNGQxYjVhYWZlZD9zPTQ4MCZyPXBnJmQ9aHR0cHMlM0ElMkYlMkZjZG4uYXV0aDAuY29tJTJGYXZhdGFycyUyRmpvLnBuZyIsInVwZGF0ZWRfYXQiOiIyMDE4LTEyLTAyVDIxOjU5OjMyLjY4M1oiLCJlbWFpbCI6ImpvaG5kb2VAYWNtZS5pbmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlzcyI6Imh0dHBzOi8vYXBpc3VtbWl0LmV1LmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw1YmYxMzBkYzVhMDBhZjIyMTlkYzllNTMiLCJhdWQiOiJ6UTc1cElQVWJsekgyZkxJUFdTa2V3RjIwZ0IxS3hRUyIsImlhdCI6MTU0Mzc4OTE2OSwiZXhwIjoxNTQzODI1MTY5LCJhdF9oYXNoIjoiaEVQQmRmNHM5R1NGNFpGNkhRYU5fQSIsImNfaGFzaCI6IkZIaWppZjNDUzRUYmE2R3k3RTVJRnciLCJub25jZSI6IjEyMzQ1Nzg5In0.uq76Zu2wS8SmgnT7Ghibvl09BsWN0mMGsuN8eQKuE7u5svLxKBAluiD5NsjvhATsECdjRYJTUvSYos_VLhhJ6H-PaNegsAW2_josm4DdiAVYoiuQBx1RJvmJ47AuhGwStDdtTpphjv7AlGq7vylP9USsWPV8_vQT6ElM5pKP77tb6aaj-qjMXUsknyGXBT14rWgj_FwhkdgOoiTvNGkZbhVR6jxF8_KUULlN9B43fjMzgjw_0UHDQLVDQ6YYEDlJUauLogIhjz_CWfcOSeEDFegVtQAfXfX2APF5MNZPFz278t_rxpwq278D-qBtRX3o_gD64G3j1PoPiB0iCgRE5w
@code = krNy6dAqUDxNbc7N

###

# Get access token
# @name token
POST https://{{tenant}}/oauth/token
Content-Type: application/json

{
    "grant_type":"authorization_code",
    "client_id": "{{client_id}}",
    "client_secret": "{{client_secret}}",
    "code": "{{code}}",
    "redirect_uri": "{{redirect_uri}}"
}

@access_token2 = {{token.response.body.$.access_token}}
@id_token2 = {{token.response.body.$.id_token}}
@refresh_token2 = {{token.response.body.$.refresh_token}}


###

# Tokeninfo Calucator API
GET http://localhost:5001/api/tokeninfo
Authorization: Bearer {{access_token}}

###

# Tokeninfo Calucator API
GET http://localhost:5001/api/tokeninfo
Authorization: Bearer {{access_token2}}

###

# Double Calucator API
GET http://localhost:5001/api/double/3
Authorization: Bearer {{access_token}}

###

# Square Calucator API
GET http://localhost:5001/api/square/3
Authorization: Bearer {{access_token}}

###

# Refresh token
# @name token2
POST https://{{tenant}}/oauth/token
Content-Type: application/json

{
    "grant_type": "refresh_token",
    "client_id": "{{client_id}}",
    "client_secret": "{{client_secret}}",
    "refresh_token": "{{refresh_token2}}"
}
